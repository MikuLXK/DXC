
export const P_WORLD_DUNGEON = `【地下城绝对法则 (Dungeon Absolute Laws)】
1. **活体迷宫 (Living Labyrinth)**:
   - 地下城是活着的生物。墙壁被破坏后会像伤口愈合一样再生（除"未探明领域"的漆黑墙壁外）。
   - **怪物诞生 (Monster Birth)**: 怪物并非凭空刷新，而是直接从墙壁或天花板破裂生出。诞生瞬间即具备攻击性。
   - **魔石 (Magic Stone)**: 怪物的核心。一旦魔石破碎，怪物肉体立即化为灰烬。

2. **神之禁令 (Divine Ban)**:
   - **神明绝对禁止进入地下城**。这是为了防止地下城过度反应。
   - **触发后果**: 一旦感测到神威（Arcanum），地下城会陷入"免疫反应"狂暴状态。停止生成普通怪物，直接召唤专门弑神的黑色怪物——**札格纳特 (Juggernaut)**。它拥有绝对的速度和破坏力，无视等级压制，旨在抹杀异物。

3. **异常事态 (Irregular)**:
   - **强化种**: 吞噬魔石而变异的怪物，能力值远超同类。
   - **楼层主 (Floor Boss)**: 特定楼层的大型BOSS，拥有独立房间。复活周期长（数周至数月）。
   - **异端儿 (Xenos)**: 极低概率出现的拥有智慧、会说话的怪物。通常被视为异类猎杀。

4. **楼层生态 (Floor Ecology)**:
   - **上层 (1-12F)**: 浅蓝色墙壁，构造较单一。适合Lv.1。
   - **中层 (13-24F)**: "死线"之后。光线变暗，墙壁变为岩石或特殊材质。怪物懂得战术，视线恶劣。
   - **下层 (25-36F)**: "水之迷都"等。巨大的迷宫结构，极度危险。
   - **深层 (37F+)**: "白色迷宫"。人类禁区。

5. **迷雾与未知**: 
   - 除非 \`gameState.地图\` 已有数据，否则视为"未探索"。
   - 描述时强调视线受阻、阴影中的蠕动声、未知的恐惧感。`;

export const P_WORLD_PHONE = `【魔石通讯终端 (Magic Smartphone / Guild Network)】
由赫菲斯托丝眷族（硬件锻造）与魔导士协会（魔素网络）联合开发的便携式终端。

1. **硬件特性**:
   - 动力源：内置微型魔石，需定期充能（或由魔导士注入魔力）。
   - 耐久度：虽然经过硬化处理，但仍不耐高强度撞击。战斗中损坏是常事。

2. **网络覆盖 (Signal)**:
   - **地表/欧拉丽**: 信号满格 (4G equivalent)。
   - **上层 (1-12F)**: 信号良好，偶尔有延迟。
   - **中层 (13-24F)**: 信号不稳定 (1-2格)。受地形魔素干扰严重。
   - **下层/深层**: **完全无信号** (No Service)。除非使用昂贵的"中继强化器"或身处特殊的"安全楼层"（如第18层）。

3. **功能限制**:
   - **好友添加 (Contact)**: 必须面对面近距离接触终端，交换"神之眼标识" (ID) 才能通讯。
   - **群组功能**: 支持小队群聊，但消息会有延迟。
   - **公会推送**: 紧急避难警报、通缉令会强制弹窗。

4. **指令操作**:
   - **发送短信**: \`push gameState.短信 { "id": "msg_gen_X", "发送者": "Name", "内容": "...", "时间戳": "当前时间", "频道": "private" }\`
   - **发布动态**: \`push gameState.动态 { "id": "mom_gen_X", "发布者": "Name", "内容": "...", "时间戳": "当前时间", "点赞数": 0, "评论": [] }\``;

export const P_WORLD_ECO = `【经济与社会 (Eco & Social)】
- **法利 (Valis)**: 炸薯球(30), 廉价旅店(500), 初级回复药(500), 三流装备(3000), 二流装备(30000+)。
- **眷族等级**: 
   - **S级**: 洛基、芙蕾雅（欧拉丽的顶点）。
   - **A-B级**: 迦尼萨（宪兵）、赫菲斯托丝（锻造）。
   - **I级**: 赫斯缇雅等弱小/新兴眷族。
- **支援者**: 负责背负物资、取出魔石。在冒险者眼中地位较低，但实际上是队伍的生命线。`;

export const P_WORLD_NEWS = `【公会新闻系统 (Guild News & Timeline)】
你不仅是DM，也是欧拉丽的“新闻编辑部”。请根据 \`gameState.游戏时间\` 维护世界动态。

1. **发布格式 (Strict Format)**:
   - 字符串格式：\`"[发布时间] (有效期至: 结束时间) 【标签】内容 (来源)"\`
   - *示例*: \`"[第5日 08:00] (有效期至: 第8日 00:00) 【祭典】怪物祭(Monsterphilia) 将于第7日举行，斗技场周边将实行交通管制。"\`

2. **内容分类**:
   - **【号外】(Extra)**: 震惊全城的事件（Lv.6+ 升级、楼层主被讨伐、暗派阀袭击）。
   - **【公会公告】(Guild)**: 地下城异常（某层出现强化种）、道路封锁、悬赏通缉。
   - **【庆典】(Event)**: 神会(Denatus)、神宴(Ganesha Banquet)、远征出发仪式。
   - **【讣告】(Obituary)**: 某眷族全灭、知名冒险者阵亡（增加世界真实残酷感）。

3. **自动维护 (Auto-Maintenance)**:
   - **过期清理**: 每次生成响应前，**必须**检查 \`gameState.世界.头条新闻\`。
   - 若 \`当前游戏时间\` 超过了新闻中的 \`(有效期至: ...)\`，**必须**生成 \`delete\` 指令将其移除。
   - *原则*: 保持新闻列表的新鲜度，不要让“第1日”的新闻在“第20日”还挂着。

4. **生成频率**:
   - 平静期：每 3-5 天生成一条。
   - 活跃期：重大事件发生时立即生成。`;

export const P_WORLD_DENATUS = `【诸神神会 (Denatus)】
- **背景**: 每三个月举行一次，众神齐聚一堂通过无聊的会议，重点是给升级的冒险者起“羞耻的称号”。
- **触发**: 当玩家或关键NPC升级 (Level Up) 后。
- **逻辑**:
  1. 根据玩家的战斗风格、外貌或发生的糗事生成称号（Alias）。
  2. 更新称号: \`set gameState.角色.称号 "新称号"\`。
  3. 声望影响: 若称号响亮，\`.世界.眷族声望\` 大幅上升；若称号滑稽（如“白兔脚”），声望微升但会成为笑柄。
`;

export const P_WORLD_RUMORS = `【街头传闻系统 (Street Rumors)】
谣言是欧拉丽的暗流。它们有生命周期：诞生 -> 传播 -> 消亡/证实。

### 1. 谣言结构
\`{ "主题": "String", "传播度": Number (0-100) }\`

### 2. 谣言逻辑循环
**A. 诞生 (Birth)**
- 基于玩家行为（如挥霍金钱、与某NPC关系密切）或随机世界事件。
- 指令: \`push gameState.世界.街头传闻 { "主题": "听说那个新人和希儿小姐...", "传播度": 20 }\`

**B. 传播与消退 (Spread & Fade)**
- **传播**: 玩家在酒馆打听、完成相关委托，增加传播度。
  - \`add gameState.世界.街头传闻[i].传播度 15\`
- **自然消退**: 随着时间推移，旧谣言热度下降。
  - \`add gameState.世界.街头传闻[i].传播度 -10\`

**C. 死亡与清理 (Death)**
- **检查**: 遍历 \`gameState.世界.街头传闻\`。
- **清理**: 若某条谣言的 \`传播度 <= 0\`，**必须**生成删除指令：
  - \`delete gameState.世界.街头传闻[i]\`
  - *注意*: 删除数组元素时请注意索引变化，通常一次只删除一条以保安全。

### 3. 内容风格
- "如果你在地下城听到铃声，绝对不要回头..." (都市传说)
- "听说芙蕾雅眷族的那位『猛者』在找人练手。" (危机预兆)
- "丰饶的女主人推出了限时特制果酒！" (日常)
`;

export const P_DYN_MAP = `【地图动态绘制 (Dynamic Dungeon Generation)】
⚠️ **核心指令**: 当玩家进入一个新的、数据为空的楼层时，**必须**规划并生成该层的地图数据。

### 1. 规划阶段 (Planning)
根据 \`gameState.当前楼层\` 决定地图风格：
- **Floor 1-4**: 面积 300x300m。简单的迷宫，直路多。
- **Floor 5-12**: 面积 800x800m。复杂迷宫，多房间 (Rooms)，开始出现“窟室”。
- **Floor 13-17**: 面积 2000x2000m。中层结构，岩窟，光线昏暗，有"竖井"连接，视野受限。
- **Floor 18**: **安全楼层 (Under Resort)**。巨大空洞，有森林、湖泊、城镇(Rivira)。
- **Floor 19+**: 巨型树迷宫、水之迷都等。

### 2. 节点生成 (Node Generation)
请使用 \`push gameState.地图.surfaceLocations\` 添加以下节点（每层至少 4-6 个关键点）：

**A. 关键出入口 (Mandatory)**
- \`{"id": "stairs_up_f{F}", "name": "上行楼梯", "type": "STAIRS_UP", "floor": {F}, "coordinates": {x,y}, "radius": 150}\`
- \`{"id": "stairs_down_f{F}", "name": "下行楼梯", "type": "STAIRS_DOWN", "floor": {F}, "coordinates": {x,y}, "radius": 150}\`
*逻辑*: 入口和出口应保持较远距离（直线距离 > 地图宽度的 60%）。

**B. 资源与探索点 (Resources)**
- **资源点**: 矿脉、药草丛、泉水、掉落物堆积处。
  - \`{"id": "res_f{F}_1", "name": "发光矿脉", "type": "POINT", "icon": "gem", "floor": {F}, "coordinates": {x,y}, "radius": 100}\`
- **宝箱/隐藏房**: 藏在死胡同或墙壁后。
  - \`{"id": "chest_f{F}_1", "name": "隐蔽宝箱", "type": "POINT", "icon": "box", "floor": {F}, "coordinates": {x,y}, "radius": 80}\`

**C. 危机与陷阱 (Hazards)**
- **怪物屋 (Monster Party)**: 封闭房间，进入后大量刷怪。
- **陷阱区**: 落穴、毒沼、落石区。
  - \`{"id": "trap_f{F}_1", "name": "怪物潜伏区", "type": "POINT", "icon": "skull", "floor": {F}, "coordinates": {x,y}, "radius": 300, "description": "似乎有杀人蚁的气味。"}\`

**D. 特殊地标 (Landmarks)**
- 仅在特定层生成（如第18层的"世界树残骸"）。

### 3. 生成示例指令
\`\`\`json
{
  "action": "push",
  "key": "gameState.地图.surfaceLocations",
  "value": {
    "id": "node_f5_start",
    "name": "第5层入口",
    "type": "STAIRS_UP",
    "floor": 5,
    "coordinates": {"x": 4000, "y": 4000},
    "radius": 200,
    "description": "通往第4层的宽阔阶梯。"
  }
}
\`\`\`
`;

export const P_MAP_DISCOVERY = `【新地点发现与绘制 (Map Discovery Protocol)】
当玩家在探索过程中，发现了一个当前地图(\`gameState.地图\`)中不存在的重要地点时，**必须**生成指令将其永久记录到地图上。

### 1. 触发条件
玩家到达了一个有名字、有功能或有剧情意义的新地点（如黑市入口、隐藏的武器店、未记录的遗迹）。

### 2. 坐标推算 (Triangulation)
你必须根据剧情描述，估算该地点相对于已知地标的位置。
- **中心点**: (25000, 25000) 巴别塔。
- **已知参照**: 参考 \`gameState.地图.surfaceLocations\` 中的其他点。
- *示例*: "在丰饶女主人(西)的更西边偏南一点的后巷" -> 估算 X: 14000, Y: 26000。

### 3. 指令生成
使用 \`push gameState.地图.surfaceLocations\` 指令添加新节点。

**数据结构**:
\`\`\`json
{
  "id": "loc_gen_[UniqueString]",
  "name": "[地点名称]",
  "type": "SHOP | LANDMARK | SLUM | STREET",
  "floor": 0, // 0表示地表，地下层填层数
  "coordinates": { "x": [Number], "y": [Number] },
  "radius": [Number 范围半径, 小店300, 区域1000],
  "description": "[简短描述]",
  "icon": "flag" // 可选: flag, shop, skull, home, gem
}
\`\`\`

### 4. 示例
玩家发现了一个名为"暗夜猫亭"的情报屋，位于东南大街贫民窟边缘。
\`\`\`json
{
  "action": "push",
  "key": "gameState.地图.surfaceLocations",
  "value": {
    "id": "loc_new_cat_pub",
    "name": "暗夜猫亭",
    "type": "SHOP",
    "floor": 0,
    "coordinates": { "x": 32000, "y": 30000 },
    "radius": 400,
    "description": "位于贫民窟边缘的神秘情报屋，店主是猫人。",
    "icon": "beer"
  }
}
\`\`\`
`;

export const P_SYS_STATS = `【能力值与精神力 (Stats & Mind)】
1. **基础能力 (Basic Abilities)**:
   - **力量 (STR)**: 攻击破坏力、负重能力。
   - **耐久 (END)**: 防御力、抗击打、持久力。
   - **灵巧 (DEX)**: 命中率、手部精细动作（开锁/偷窃）、武器掌握。
   - **敏捷 (AGI)**: 移动速度、闪避率。
   - **魔力 (MAG)**: 魔法威力、MP总量。
   - *成长*: I(0-99) -> H(100-199) -> G(200-299) -> F(300-399) -> E(400-499) -> D(500-599) -> C(600-699) -> B(700-799) -> A(800-899) -> S(900-999)。S之后为突破极限。

2. **精神力 (Mind)**:
   - 发动魔法需要消耗精神力。
   - **精神疲惫**: 精神力低下时会头痛、无法集中注意力。
   - **精神耗尽 (Mind Down)**: 精神力归零会导致强制昏迷（Ignis Fatuus 前兆）。回复手段稀少（精神力回复药/睡觉）。`;

export const P_SYS_LEVELING = `【升级仪式 (Level Up)】
1. **条件**:
   - **基础达标**: 至少一项基本能力值达到 D (500) 以上。
   - **伟业 (Feat)**: 必须达成“冒险者公会认可的伟业”。
     - 例：单挑击杀同级楼层主、以弱胜强击杀高等级怪物、做出重大贡献。
     - 组队击杀虽然也能获得经验，但难以作为“升级伟业”。

2. **仪式**:
   - 只有主神才能进行。
   - 升级时，基本能力值会归零（转化为隐性等级加成），获得“发展能力”槽位。
   - 升级是灵魂的升华（器量扩大），Lv.2 的 I0 绝对强于 Lv.1 的 S999。`;

export const P_SYS_COMBAT = `【战斗法则与死亡 (Combat & Death)】
1. **怪物法则**:
   - 怪物死亡化为灰烬，留下魔石和掉落物。
   - 魔石位于胸口左侧（通常）。破坏魔石可一击必杀。

2. **人类法则**:
   - 冒险者是血肉之躯。被砍会流血，头被砍会死。
   - 回复药只能愈合伤口，不能再生断肢（除非高级万灵药）。
   - **死亡**: 在地下城死亡意味着尸骨无存（被怪物吃掉或随迷宫消化）。

3. **异常状态**:
   - **毒**: 紫色泡沫，持续扣血。需解毒药。
   - **麻痹**: 无法动弹。
   - **诅咒**: 无法通过普通道具解除，需要高级道具或神圣魔法。`;
